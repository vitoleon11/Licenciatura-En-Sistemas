programa punto2
procesos
  proceso dejarPapeles(E avActual:numero;E caActual:numero)
  comenzar
    BloquearEsquina(50,50)
    Pos(50,50)
    repetir 5
      depositarPapel
    Pos(avActual,caActual)
    LiberarEsquina(50,50)
  fin

areas
  ciudad: AreaC(1,1,100,100)
  
robots
  robot productor
  variables
    cantPapeles:numero
  comenzar
    cantPapeles := 0
    mientras (PosCa < 100)
      mientras (HayPapelEnLaEsquina) & (cantPapeles < 5)
        tomarPapel
        cantPapeles := cantPapeles + 1
      si (cantPapeles = 5)
        dejarPapeles(PosAv,PosCa)
        cantPapeles:= 0
      sino
        mover
  fin
  
  robot consumidor
  variables
    cantPapeles,papeles50,caInicial,avInicial,fallos:numero
  comenzar
    avInicial := PosAv
    caInicial := PosCa
    fallos := 0
    mientras (fallos < 8)
      Random(cantPapeles,2,5)
      BloquearEsquina(50,50)
      Pos(50,50)
      mientras (HayPapelEnLaEsquina) & (papeles50 < cantPapeles)
        tomarPapel
        papeles50 := papeles50 + 1
      si (papeles50 = cantPapeles)
        Pos(avInicial,caInicial)
        LiberarEsquina(50,50)
        mientras HayPapelEnLaBolsa
          depositarPapel
      sino 
        mientras HayPapelEnLaBolsa
          depositarPapel
        Pos(avInicial,caInicial)
        LiberarEsquina(50,50)
        fallos := fallos + 1
  fin
  
variables
  productor1: productor
  productor2: productor
  consumidor1:consumidor
  consumidor2: consumidor
comenzar
  AsignarArea(productor1,ciudad)
  AsignarArea(productor2,ciudad) 
  AsignarArea(consumidor1,ciudad)
  AsignarArea(consumidor2,ciudad)
  
  Iniciar(productor1,5,1)
  Iniciar(productor2,10,1)
  Iniciar(consumidor1,11,1)
  Iniciar(consumidor2,12,1)
fin
